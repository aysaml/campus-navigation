webpackJsonp([4],{"62Lh":function(e,t){},Ud5z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{pictures:[],placeName:"",options:[{value:"-1",label:"待审核（-1）"},{value:"1",label:"审核通过（1）"},{value:"0",label:"审核不通过（0）"}],picName:"",state:"",totals:0,pageNum:1,pageSize:9,centerDialogVisible:!1,dialogFormVisible:!1,picDialogVisible:!1,minIsActive:!0,maxIsActive:!1,imgUrl:"",form:{id:"",url:"",picName:"",placeName:"",remark:"",createTime:"",updateTime:"",operator:"",yn:""}}},mounted:function(){this.loadPictureCount(),this.loadPictures()},methods:{loadPictures:function(){var e=this;this.getRequest("/picture/manage/findPictureListPage?pageNum=1&pageSize=9&picName=&yn=").then(function(t){if(t&&200==t.status){var i=t.data;e.pictures=i}})},loadPictureCount:function(){var e=this;this.getRequest("/picture/manage/findPictureCount?picName=&yn=").then(function(t){if(t&&200==t.status){var i=t.data;e.totals=i}})},handleSizeChange:function(e){var t=this;t.pageSize=e,this.getRequest("/picture/manage/findPictureListPage?pageNum="+t.pageNum+"&pageSize="+t.pageSize+"&picName="+t.picName+"&yn="+t.state).then(function(e){if(e&&200==e.status){var i=e.data;t.pictures=i}}),this.getRequest("/picture/manage/findPictureCount?picName="+t.picName+"&yn="+t.state).then(function(e){if(e&&200==e.status){var i=e.data;t.totals=i}})},handleCurrentChange:function(e){var t=this;t.pageNum=e,this.getRequest("/picture/manage/findPictureListPage?pageNum="+t.pageNum+"&pageSize="+t.pageSize+"&picName="+t.picName+"&yn="+t.state).then(function(e){if(e&&200==e.status){var i=e.data;t.pictures=i}}),this.getRequest("/picture/manage/findPictureCount?picName="+t.picName+"&yn="+t.state).then(function(e){if(e&&200==e.status){var i=e.data;t.totals=i}})},stateChange:function(e){this.state=e},ynChange:function(e){this.form.yn=e},search:function(){var e=this,t=this;this.getRequest("/picture/manage/findPictureListPage?pageNum="+t.pageNum+"&pageSize="+t.pageSize+"&picName="+t.picName+"&yn="+t.state).then(function(e){if(e&&200==e.status){var i=e.data;t.pictures=i}}),this.getRequest("/picture/manage/findPictureCount?picName="+t.picName+"&yn="+t.state).then(function(i){if(i&&200==i.status){var a=i.data;t.totals=a,0==t.totals&&e.$notify({title:"未查询到相关图片",type:"info",message:"请您尝试更换一个检索词！",position:"bottom-right"})}})},delPicture:function(e,t){var i=this;this.$confirm("此操作将永久删除["+t+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.doDelete(e)}).catch(function(){})},doDelete:function(e){var t=this;this.deleteRequest("/picture/manage/delete?id="+e).then(function(e){0==e.data&&200==e.status&&(t.centerDialogVisible=!0,t.loadPictures(),t.loadPictureCount())})},preview:function(e){this.form.id=e.id,this.form.url=e.url,this.form.picName=e.picName,this.form.placeName=e.placeName,this.form.remark=e.remark,this.form.createTime=e.createTime,this.form.updateTime=e.updateTime,this.form.operator=e.operator,this.form.yn=e.yn,this.dialogFormVisible=!0},toggleClass:function(e){this.imgUrl=e,this.picDialogVisible=!0},updatePicture:function(){var e=this,t={id:e.form.id,url:encodeURIComponent(e.form.url),picName:e.form.picName,placeName:e.form.placeName,remark:e.form.remark,createTime:e.form.createTime,updateTime:e.form.updateTime,operator:e.form.operator,yn:e.form.yn};this.postRequest("/picture/manage/update",{picture:t}).then(function(t){t&&200==t.status&&0==t.data?(e.success(),e.loadPictures(),e.loadPictureCount()):e.failed()}),e.dialogFormVisible=!1},success:function(){this.$message({message:"图片审核操作成功！",type:"success"})},failed:function(){this.$message.error("操作失败！")}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("h1",[e._v("\n      图片管理\n    ")]),e._v(" "),i("div",[i("el-input",{staticStyle:{width:"400px","margin-right":"10px"},attrs:{placeholder:"输入图片名称获取更多图片信息...","prefix-icon":"el-icon-search",size:"small",clearable:""},model:{value:e.picName,callback:function(t){e.picName=t},expression:"picName"}}),e._v(" "),i("el-select",{staticStyle:{width:"130px"},attrs:{size:"small",placeholder:"状态",clearable:""},on:{change:e.stateChange},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"space-around","flex-wrap":"wrap","text-align":"left","margin-top":"20px"}},e._l(e.pictures,function(t,a){return i("el-card",{key:t.id,staticStyle:{width:"350px","margin-bottom":"20px"},attrs:{shadow:"hover"}},[i("el-button",{staticStyle:{color:"#f6061b",margin:"0px",float:"right",padding:"3px 0",width:"15px",height:"15px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){e.delPicture(t.id,t.picName)}}}),e._v(" "),i("img",{class:{min:e.minIsActive,max:e.maxIsActive},attrs:{src:t.url},on:{click:function(i){e.toggleClass(t.url)}}}),e._v(" "),i("div",{staticStyle:{padding:"14px"}},[i("span",[e._v(e._s(t.picName))]),i("br"),e._v(" "),i("span",{staticClass:"pName el-icon-location-outline"},[e._v(e._s(t.placeName))]),e._v(" "),i("div",{staticClass:"bottom clearfix"},[i("time",{staticClass:"time el-icon-date"},[e._v(e._s(t.createTime))]),i("br"),e._v(" "),i("el-button",{staticClass:"button",attrs:{type:"text"},on:{click:function(i){e.preview(t)}}},[e._v("审核")])],1)])],1)})),e._v(" "),i("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[9,27,36,45],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totals},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("div",[i("el-dialog",{attrs:{title:"提示",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("span",[e._v("操作成功！")]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("确 定")])],1)])],1),e._v(" "),i("div",[i("el-form",{staticStyle:{margin:"0px",padding:"0px"},attrs:{model:e.form}},[i("div",{staticStyle:{"text-align":"left"}},[i("el-dialog",{staticStyle:{padding:"0px"},attrs:{title:"图片审核","close-on-click-modal":!1,visible:e.dialogFormVisible,width:"77%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"图片编号:"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"图片地址:"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",disabled:""},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"图片名称:"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini"},model:{value:e.form.picName,callback:function(t){e.$set(e.form,"picName",t)},expression:"form.picName"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"地点名称:"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini"},model:{value:e.form.placeName,callback:function(t){e.$set(e.form,"placeName",t)},expression:"form.placeName"}})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"创建日期:"}},[i("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"创建日期"},model:{value:e.form.createTime,callback:function(t){e.$set(e.form,"createTime",t)},expression:"form.createTime"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"更新日期:"}},[i("el-date-picker",{staticStyle:{width:"150px"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date",placeholder:"更新日期"},model:{value:e.form.updateTime,callback:function(t){e.$set(e.form,"updateTime",t)},expression:"form.updateTime"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"审核人员:"}},[i("el-input",{staticStyle:{width:"150px"},attrs:{"prefix-icon":"el-icon-edit",size:"mini",placeholder:"请填写管理账号Id"},model:{value:e.form.operator,callback:function(t){e.$set(e.form,"operator",t)},expression:"form.operator"}})],1)],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",[i("el-form-item",{attrs:{label:"审核状态:"}},[i("el-select",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"状态",clearable:""},on:{change:e.ynChange},model:{value:e.form.yn,callback:function(t){e.$set(e.form,"yn",t)},expression:"form.yn"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)])],1),e._v(" "),i("el-row",[i("div",[i("el-form-item",{attrs:{label:"图片描述："}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.remark,expression:"form.remark"}],staticStyle:{width:"956px",height:"104px"},domProps:{value:e.form.remark},on:{input:function(t){t.target.composing||e.$set(e.form,"remark",t.target.value)}}})])],1)]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.updatePicture}},[e._v("确 定")])],1)],1)],1)])],1),e._v(" "),i("div",[i("el-dialog",{attrs:{title:"图片预览",visible:e.picDialogVisible,fullscreen:""},on:{"update:visible":function(t){e.picDialogVisible=t}}},[i("img",{staticClass:"max",attrs:{src:e.imgUrl}}),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.picDialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=i("VU/8")(a,r,!1,function(e){i("62Lh")},"data-v-1c058cd9",null);t.default=l.exports},VrDl:function(e,t,i){var a={"./PictureManage.vue":"Ud5z"};function r(e){return i(l(e))}function l(e){var t=a[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(a)},r.resolve=l,e.exports=r,r.id="VrDl"}});
//# sourceMappingURL=4.6facb385df893b9820b4.js.map